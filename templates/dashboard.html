<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TARA | Trading Assistant</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/dashboard.css?v=13">
</head>
<body>
    <canvas id="matrix-bg"></canvas>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <h1>ü§ñ TARA</h1>
                <div class="subtitle">TRADING ASSISTANT & RISK ANALYZER</div>
            </div>
            <span id="botStatus" class="status-badge loading">INITIALIZING...</span>
        </div>
        
        <!-- Control Panel -->
        <div class="control-panel">
            <div class="market-status" id="marketStatus">
                <div class="status-label">MARKET STATUS</div>
                <div class="status-value">Loading...</div>
            </div>
            <div class="daily-limits" id="dailyLimits">
                <div class="limit-item">
                    <span>TRADES</span>
                    <span id="tradesCount">0/5</span>
                </div>
                <div class="limit-item">
                    <span>DAILY P/L</span>
                    <span id="dailyPnl">0.00%</span>
                </div>
            </div>
            <div class="controls">
                <button id="pauseBtn" class="btn btn-warning">PAUSE</button>
                <button id="resumeBtn" class="btn btn-success" style="display:none;">RESUME</button>
                <button id="forceCloseBtn" class="btn btn-danger">FORCE CLOSE</button>
                <button id="settingsBtn" class="btn btn-info">‚öôÔ∏è SETTINGS</button>
            </div>
        </div>
        
        <!-- Stats Grid -->
        <div class="grid">
            <div class="card">
                <div class="card-title">ACCOUNT OVERVIEW</div>
                <div class="stat">
                    <span class="stat-label">Cash Available</span>
                    <span class="stat-value" id="cash">$0.00</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Buying Power</span>
                    <span class="stat-value" id="buyingPower">$0.00</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Portfolio Value</span>
                    <span class="stat-value" id="portfolioValue">$0.00</span>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">PERFORMANCE METRICS</div>
                <div class="stat">
                    <span class="stat-label">Total Trades</span>
                    <span class="stat-value" id="totalTrades">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Win Rate</span>
                    <span class="stat-value" id="winRate">0%</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Average P/L</span>
                    <span class="stat-value" id="avgPnl">0.00%</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Total P/L</span>
                    <span class="stat-value" id="totalPnl">0.00%</span>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">üéØ TARGET SYMBOL OF THE DAY</div>
                <div id="tickerInfo" class="empty-state">AWAITING PRE-MARKET SCAN...</div>
            </div>
            
            <div class="card">
                <div class="card-title">ACTIVE POSITION</div>
                <div id="positionInfo" class="empty-state">NO POSITION DETECTED</div>
            </div>
        </div>

        <!-- Watchlist Manager -->
        <div class="card" style="margin-bottom: 25px;">
            <div class="card-title">WATCHLIST MANAGER</div>
            <div class="watchlist-controls">
                <input type="text" id="newTicker" placeholder="Enter ticker (e.g., SPY)" maxlength="5" class="ticker-input">
                <button id="addTickerBtn" class="btn btn-success">ADD TICKER</button>
            </div>
            <div id="watchlistContainer" class="watchlist-tags">
                <div class="empty-state">Loading watchlist...</div>
            </div>
        </div>
        
        <!-- Today's Trades -->
        <div class="card" style="margin-bottom: 25px;">
            <div class="card-title">TODAY'S TRADES</div>
            <div style="overflow-x: auto;">
                <table class="trades-table" id="tradesTable">
                    <thead>
                        <tr>
                            <th>TIME</th>
                            <th>SYMBOL</th>
                            <th>TYPE</th>
                            <th>QTY</th>
                            <th>ENTRY</th>
                            <th>EXIT</th>
                            <th>P/L</th>
                            <th>REASON</th>
                        </tr>
                    </thead>
                    <tbody id="tradesBody">
                        <tr>
                            <td colspan="8" class="empty-state">NO TRADES EXECUTED TODAY</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- System Logs -->
        <div class="card">
            <div class="card-title">
                SYSTEM LOGS
                <div class="log-controls">
                    <input type="text" id="logSearch" placeholder="üîç Search logs..." class="log-search">
                    <select id="logFilter" class="log-filter">
                        <option value="all">All Levels</option>
                        <option value="INFO">‚ÑπÔ∏è Info</option>
                        <option value="WARNING">‚ö†Ô∏è Warning</option>
                        <option value="ERROR">‚ùå Error</option>
                        <option value="DEBUG">üîß Debug</option>
                    </select>
                    <button id="clearLogs" class="btn-mini">üóëÔ∏è Clear</button>
                    <button id="pauseLogs" class="btn-mini">‚è∏Ô∏è Pause</button>
                    <button id="downloadLogs" class="btn-mini">üíæ Download</button>
                </div>
            </div>
            <div class="logs-stats">
                <span class="log-stat">Total: <span id="totalLogs">0</span></span>
                <span class="log-stat log-stat-info">Info: <span id="infoCount">0</span></span>
                <span class="log-stat log-stat-warning">Warnings: <span id="warningCount">0</span></span>
                <span class="log-stat log-stat-error">Errors: <span id="errorCount">0</span></span>
            </div>
            <div class="logs-container" id="logsContainer">
                <div class="log-line loading">LOADING SYSTEM LOGS...</div>
            </div>
        </div>
        
        <div class="refresh-time">
            LAST UPDATE: <span id="lastUpdate">--:--:--</span>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è TARA Settings</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>Trading Parameters</h3>
                    <div class="setting-item">
                        <label>Profit Target (%)</label>
                        <input type="number" id="profitTarget" step="0.01" min="0" max="1">
                        <span class="setting-help">Exit when position reaches this profit percentage</span>
                    </div>
                    <div class="setting-item">
                        <label>Stop Loss (%)</label>
                        <input type="number" id="stopLoss" step="0.01" min="0" max="1">
                        <span class="setting-help">Exit when position hits this loss percentage</span>
                    </div>
                    <div class="setting-item">
                        <label>Risk Per Trade (%)</label>
                        <input type="number" id="riskPerTrade" step="0.001" min="0" max="0.1">
                        <span class="setting-help">Percentage of capital to risk per trade</span>
                    </div>
                    <div class="setting-item">
                        <label>Position Timeout (seconds)</label>
                        <input type="number" id="timeout" step="1" min="60" max="3600">
                        <span class="setting-help">Auto-exit if position held longer than this</span>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Safety Limits</h3>
                    <div class="setting-item">
                        <label>Max Daily Loss (%)</label>
                        <input type="number" id="maxDailyLoss" step="0.01" min="0" max="0.5">
                        <span class="setting-help">Stop trading if daily loss exceeds this</span>
                    </div>
                    <div class="setting-item">
                        <label>Max Trades Per Day</label>
                        <input type="number" id="maxTrades" step="1" min="1" max="50">
                        <span class="setting-help">Maximum number of trades allowed per day</span>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Signal Detection</h3>
                    <div class="setting-item">
                        <label>RSI Call Minimum</label>
                        <input type="number" id="rsiCallMin" step="1" min="50" max="80">
                        <span class="setting-help">Minimum RSI for call signals</span>
                    </div>
                    <div class="setting-item">
                        <label>RSI Put Maximum</label>
                        <input type="number" id="rsiPutMax" step="1" min="20" max="50">
                        <span class="setting-help">Maximum RSI for put signals</span>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button id="saveSettings" class="btn btn-success">SAVE CHANGES</button>
                    <button id="cancelSettings" class="btn btn-secondary">CANCEL</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="/static/matrix.js"></script>
    <script src="/static/dashboard.js?v=7"></script>
</body>
</html>
